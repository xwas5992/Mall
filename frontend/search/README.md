# 搜索页前后端连接说明

## 概述

搜索页已经完成了与后端产品服务的连接，支持以下功能：

- 商品搜索（关键词搜索）
- 分类筛选
- 品牌筛选
- 价格区间筛选
- 分页显示
- 网格/列表视图切换
- 用户登录/注册

## 后端API接口

### 1. 商品搜索接口
- **URL**: `http://localhost:8081/product-service/api/v1/search/filter`
- **方法**: GET
- **参数**:
  - `keyword`: 搜索关键词
  - `categoryId`: 分类ID（可选）
  - `brand`: 品牌名称（可选）
  - `minPrice`: 最低价格（可选）
  - `maxPrice`: 最高价格（可选）
  - `page`: 页码（默认0）
  - `size`: 每页大小（默认12）

### 2. 分类列表接口
- **URL**: `http://localhost:8081/product-service/api/v1/categories`
- **方法**: GET
- **返回**: 所有商品分类列表

### 3. 商品列表接口
- **URL**: `http://localhost:8081/product-service/api/products`
- **方法**: GET
- **参数**:
  - `page`: 页码
  - `size`: 每页大小
  - `sortBy`: 排序字段
  - `direction`: 排序方向

## 启动步骤

### 1. 启动后端服务

确保产品服务正在运行：

```bash
# 进入产品服务目录
cd product-service

# 启动服务
mvn spring-boot:run
```

产品服务将在 `http://localhost:8081` 启动。

### 2. 启动前端页面

由于前端是静态页面，可以直接在浏览器中打开：

```bash
# 进入前端目录
cd frontend/search

# 使用Python启动简单的HTTP服务器（可选）
python -m http.server 8000
```

然后访问：
- 搜索页：`http://localhost:8000/search.html`
- 测试页：`http://localhost:8000/test.html`

### 3. 测试API连接

访问测试页面 `test.html` 来验证前后端连接是否正常：

1. 点击"获取分类列表"测试分类API
2. 点击"搜索商品"测试搜索API
3. 点击"获取商品列表"测试商品列表API
4. 点击"获取搜索建议"测试搜索建议API

## 功能说明

### 搜索功能
- 支持关键词搜索
- 实时显示搜索结果数量
- 支持分页浏览

### 筛选功能
- 分类筛选：从后端动态加载分类列表
- 品牌筛选：预设的品牌选项
- 价格筛选：滑块选择最高价格

### 视图切换
- 网格视图：卡片式布局
- 列表视图：横向布局

### 用户功能
- 登录/注册弹框
- 加入购物车（需要登录）
- 查看商品详情

## 文件结构

```
frontend/search/
├── search.html          # 搜索页面
├── search.js           # 搜索页面JavaScript
├── style.css           # 搜索页面样式
├── test.html           # API测试页面
└── README.md           # 说明文档
```

## 注意事项

1. **CORS配置**: 后端已配置CORS允许前端访问
2. **端口配置**: 确保产品服务运行在8081端口
3. **数据库**: 确保MySQL数据库已启动并包含测试数据
4. **网络连接**: 确保前端可以访问后端API

## 常见问题

### 1. API请求失败
- 检查后端服务是否启动
- 检查端口是否正确（8081）
- 检查CORS配置

### 2. 搜索无结果
- 检查数据库中是否有商品数据
- 检查搜索关键词是否正确
- 查看浏览器控制台错误信息

### 3. 分类加载失败
- 检查分类API是否正常
- 检查数据库中是否有分类数据

## 开发建议

1. 使用浏览器开发者工具查看网络请求
2. 查看控制台错误信息进行调试
3. 使用测试页面验证API连接
4. 确保所有依赖服务正常运行 